<!-- BEGIN PLAYBAR -->
<div class="navbar fixed-bottom navbar-dark bg-dark" id="play-bar" *ngIf="song | async as song">
    <a class="navbar-brand" *ngIf="song">
        <img width="55" height="55" src="/static/i/{{ song.image ? song.image.id : 1 }}/thumbnail" alt="{{ song.album.name }}" title="{{ song.album.name }}">
    </a>

    <ul class="song-details" *ngIf="song">
        <li class="song-title">
            <a href="#">{{ song.name }}</a>
        </li>
        <li>
            <a [routerLink]="['/artist', song.album.artist.id]">{{ song.album.artist.name }}</a>
        </li>
    </ul>

    <div class="mx-auto form-inline flex-column" id="playback-controls-wrap">
        <ul class="flex-row" id="playback-controls">
            <li>
                <button class="btn btn-link" title="Shuffle" id="toggle-shuffle">
                    <i class="fa fa-fw fa-random"></i>
                </button>
            </li>
            <li>
                <button class="btn btn-link" title="Previous" id="prev-track" [disabled]="!hasPrev()">
                    <i class="fa fa-fw fa-step-backward"></i>
                </button>
            </li>
            <li>
                <button class="btn btn-link" title="Play/Pause" id="play" (click)="togglePlayback()" [disabled]="!song">
                    <i class="fa fa-fw fa-2x" [ngClass]="getPlayButtonClass()"></i>
                </button>
            </li>
            <li>
                <button class="btn btn-link" title="Next" id="next-track" [disabled]="!hasNext()">
                    <i class="fa fa-fw fa-step-forward"></i>
                </button>
            </li>
            <li>
                <button class="btn btn-link" title="Repeat" id="toggle-repeat">
                    <i class="fa fa-fw fa-repeat"></i>
                </button>
            </li>
        </ul>

        <div class="flex-row" id="playback-progress">
            <span id="current-time" [ngClass]="!song ? 'text-muted' : ''">{{ time | async | formatDuration:'s' }}</span>

            <div id="playback-track" (mousedown)="startSeek()" #progressbar>
                <div id="playback-slider" [style.width]="sliderWidth"></div>
            </div>

            <span id="total-time" *ngIf="song">{{ duration | async | formatDuration:'s' }}</span>
        </div>
    </div>

    <ul class="nav">
        <li class="nav-item">
            <a class="nav-link px-0" title="Play Queue" routerLink="/play-queue" routerLinkActive="active">
                <i class="fa fa-lg fa-fw fa-list-ul"></i>
            </a>
        </li>
        <li class="nav-item">
            <a class="nav-link pr-0 pl-2" href="#" id="mute-toggle" title="Mute" (click)="toggleMute($event)">
                <i class="fa fa-lg fa-fw" [ngClass]="{ 'fa-volume-off': muted, 'fa-volume-up': !muted }"></i>
            </a>
        </li>
    </ul>

    <div class="form-inline">
        <input type="range" class="nav-link px-0 ml-2" id="volume-control" min="0" max="1" step="0.01"
               (input)="setVolume($event.target.value)"
               [hidden]="muted">
    </div>
</div>
<!-- END PLAYBAR -->
